{% extends 'base.html.twig' %}

{% block title %}BACK - {{movie.title}}{% endblock %}

{% block body %}

    <div class="title">
        <h2>{{movie.title}}</h2>
    </div>          

    <div class ="container-read">

        <div class="description">

            <p>Release date : {{movie.releaseDate|date('d/m/Y')}}</p>
            <p>Duration : {{movie.duration|date('H:i')}}</p>

            <br>
            
            <ul><u>Genres :</u>
            {# Affichage des genres #}
            {% for genres in movie.genres %}
                <li>{{genres.name}}</li>
            {% endfor %}
            </ul>

            <br>

            <ul>
            <u> RÃ´les :</u>
            {# Affichage des castings #}
            {# {% for casting in movie.castings %} #}
            {% for casting in castings %}
            <li>({{casting.creditOrder}}) {{casting.role}} : {{casting.person}}</li>
            {% endfor %}
            </ul>

            <br><br>

            <a href="{{path('back_movie_edit', {id: movie.id})}}">
            <div class = "container card card-btn" >
                <h3>Edit</h3>
            </div>
            </a>

             <a href="{{path('back_movie_delete', {id: movie.id})}}" onclick="return confirm('Voulez-vous supprimez : {{ movie.title }} ?')">
            <div class = "container card card-btn" >
                <h3>Delete</h3>
            </div>
            </a>

        </div>

        {% if movie.poster is not null %}
            <div class="poster">
                <img src="{{movie.poster}}" alt="poster">
            </div>
        {% endif %}

    </div>

    <div class="title">
      <h3>Reviews</h3>
    </div>

    <div class="container-read">

                
    {% if movie.reviews is empty %}
        <i>no reviews...</i> 
    {% endif %}
                    {% for review in movie.reviews %}
                    <div class="card-review">
                    
                    <ul>
                        
                        <li>Par : {{review.username}}</li>
                        <br>
                        <li>Note : {{review.rating}}/5</li>

                        <li>{{review.content}}</li>
                    </ul>
                    
                    </div>    
                    {% endfor %}
             

    </div>         

{% endblock %}
